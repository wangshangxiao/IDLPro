<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN" "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta content="text/html; charset=ISO-8859-1" http-equiv="content-type"><title>EOSex_ROI_Extract_Libraries</title></head>
<body>&nbsp;&nbsp;&nbsp; <a href="file:///D:/Vip_Tools/Colibri/Reference%20Guide.html"><img style="border: 0px solid ; width: 200px; height: 130px;" alt="Colibri" title="Colibri" src="../../Logo/Colibri_full.png"></a>&nbsp;&gt;&nbsp;<a href="../Example%20Code.html">Examples</a><h1 style="color: rgb(0, 0, 120);">EOSex_ROI_Extract_Libraries</h1><a href="#Syntax">Syntax</a> |&nbsp;<a href="#Arguments">Arguments</a> | <a href="#Keywords">Keywords</a> | <a href="#Example">Example</a> | <a href="#Dependencies">Dependencies</a> | <a href="#Version_History">Version History</a><br><p>This example procedure demonstrates the use of the class method "<a href="../Object%20Classes/EOSocImages/ROI/EOSocImages%20Extract_Libraries_From_Rois.html">EOSocImages::Extract_Libraries_From_Rois</a>" for extracting spectral libraries from ROIs.</p><h2 style="color: rgb(0, 0, 120);"><a name="Syntax"></a>Syntax</h2>EOSex_ROI_Extract_Libraries<h2 style="color: rgb(0, 0, 120);"><a name="Arguments"></a>Arguments</h2>None.<h2 style="color: rgb(0, 0, 120);"><a name="Keywords"></a>Keywords</h2>None.<br><h2 style="color: rgb(0, 0, 120);"><a name="Dependencies"></a>Dependencies</h2>This demo uses the test images located in the Colibri install directory: &lt;Dir:\&gt;...\Colibri\Examples\<ul><li>DigiCam_1</li><li>DigiCam_2</li><li>DigiCam_3</li></ul><h2 style="color: rgb(0, 0, 120);"><a name="Example"></a>Example</h2><p>This example can be found in the Colibri install directory: &lt;Dir:\&gt;...\Colibri\Examples\</p><table style="text-align: left; width: 100%;" border="1" cellpadding="2" cellspacing="2"><tbody><tr><td style="background-color: rgb(226, 226, 226);"><span style="color: rgb(0, 0, 220);">;------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">pro EOSex_ROI_Extract_Libraries</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">;------------------------------------------------------------------------------------------------------------</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">compile_opt strictarr, logical_predicate</span><br style="color: rgb(0, 0, 220);"><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;----------------------</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;--- Initialization ---</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;----------------------</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp; </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; Path = ENVI_PICKFILE(/MULTIPLE_FILES, /DIRECTORY, $</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp; TITLE='Locate the directory: ''..\Examples\Data''') </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; if ~file_test(Path, /DIRECTORY) then return</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp; </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;--- Pointer to the images to be used for demo.</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; pImageList&nbsp;&nbsp; = ptr_new([Path+'\DigiCam_1', $</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Path+'\DigiCam_2', $</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Path+'\DigiCam_3']) </span><br style="color: rgb(0, 0, 220);"><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;--- Directory where the ROI files are located.</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; Roi_Dir = ENVI_PICKFILE(/MULTIPLE_FILES, /DIRECTORY, $</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp; TITLE='Select the directory where the ROI files have to be stored.')+'\'</span><br style="color: rgb(0, 0, 220);"><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; if ~file_test(Roi_Dir, /DIRECTORY) then return</span><br style="color: rgb(0, 0, 220);"><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;---------------------------------</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;--- Create the status window. ---</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;---------------------------------</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; oStatus = IOScc_Init(oStatus, $</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; Title = 'ROI_EXTRACT_LIBRARIES_DEMO', $</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Log_Directory&nbsp;&nbsp;&nbsp;&nbsp; = Roi_Dir, $</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
Log_File_Prefix&nbsp;&nbsp; = 'ROI_EXTRACT_LIBRARIES_DEMO_log')</span><br style="color: rgb(0, 0, 220);"><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;---------------------------------------------------------</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;--- Creation and Initialization of the oImages object ---</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;---------------------------------------------------------</span><br style="color: rgb(0, 0, 220);"><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; oImages = obj_new('EOSocImages', $</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; pImageList, $ </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
oStatus&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
= oStatus)</span><br style="color: rgb(0, 0, 220);"><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;-------------------------</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;--- Extract Libraries ---</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;-------------------------</span><br style="color: rgb(0, 0, 220);"><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;-- Delete the first en third ROI created earlier by ROI_CREATE_DEMO</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; SelectIx=0</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; oImages-&gt;Extract_Libraries_From_Rois, Roi_Dir, SelectIx=SelectIx, pLibraries=pLibraries, $</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; aRoiNames=aRoiNames, aRoiColors=aRoiColors</span><br style="color: rgb(0, 0, 220);"><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; if float(envi_query_version()) lt 5. then begin</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp; if strlen(aRoiNames[0]) eq 0 then begin</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oStatus-&gt;Log_Status, 'Error', 'No ROI files found.'</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp; endif</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; endif else begin</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp; </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp; if *pLibraries[0] eq !NULL then begin</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; oStatus-&gt;Log_Status, 'Error', 'No ROI files found.'</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp;&nbsp;&nbsp; return</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp;&nbsp;&nbsp; endif</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; endelse</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;--------------------</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;--- Display Info ---</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; ;--------------------</span><br style="color: rgb(0, 0, 220);"><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, ''</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, '--------------------------------'</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, ' Spectral libraries info.</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, '--------------------------------'</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, ''</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; help, pLibraries</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, ''</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, '- Contents of first pointer:'</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, ''&nbsp; </span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, *pLibraries[0]</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, ''</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, '- Structure layout:'</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, ''</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; help, *pLibraries[0], /struct</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, ''</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; help, aRoiNames</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, aRoiNames</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, ''</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; help, aRoiColors</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">&nbsp; print, aRoiColors</span><br style="color: rgb(0, 0, 220);"><span style="color: rgb(0, 0, 220);">end</span></td></tr></tbody></table><h2 style="color: rgb(0, 0, 120);"><a name="Version_History"></a>Version History</h2><table style="text-align: left; width: 100px;" border="0" cellpadding="4" cellspacing="1"><tbody><tr><td style="background-color: rgb(213, 213, 222);"><span style="font-weight: bold;">Author</span></td><td style="background-color: rgb(213, 213, 222);"><span style="font-weight: bold;">Date</span></td><td style="background-color: rgb(213, 213, 222);"><span style="font-weight: bold;">Description</span></td></tr><tr><td style="background-color: rgb(226, 226, 226);"><a href="../Authors%20and%20Contributors.html">LBer</a></td><td style="white-space: nowrap; background-color: rgb(226, 226, 226);">October 2012</td><td style="background-color: rgb(226, 226, 226);">Created</td></tr></tbody></table><p></p></body></html>